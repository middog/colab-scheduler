# =============================================================================
# Terraform S3 Backend Configuration
# =============================================================================
#
# This file configures Terraform to store state remotely in S3.
# 
# BENEFITS:
#   - State persists even if you delete local files
#   - Team members can share state
#   - State locking prevents concurrent modifications
#   - Versioning allows state recovery
#
# SETUP:
#   1. Create an S3 bucket for state:
#      aws s3 mb s3://your-terraform-state-bucket --region us-west-2
#
#   2. Enable versioning (recommended):
#      aws s3api put-bucket-versioning \
#        --bucket your-terraform-state-bucket \
#        --versioning-configuration Status=Enabled
#
#   3. (Optional) Create DynamoDB table for state locking:
#      aws dynamodb create-table \
#        --table-name terraform-locks \
#        --attribute-definitions AttributeName=LockID,AttributeType=S \
#        --key-schema AttributeName=LockID,KeyType=HASH \
#        --billing-mode PAY_PER_REQUEST
#
#   4. Rename this file to backend.tf and update values below
#
#   5. Run: tofu init (or terraform init)
#      This will migrate local state to S3
#
# =============================================================================

terraform {
  backend "s3" {
    # REQUIRED: Update these values
    bucket = "your-terraform-state-bucket"    # Your S3 bucket name
    key    = "sdcolab/terraform.tfstate"      # Path within bucket
    region = "us-west-2"                       # Bucket region
    
    # OPTIONAL: Enable state locking with DynamoDB
    # dynamodb_table = "terraform-locks"
    
    # OPTIONAL: Enable encryption at rest
    # encrypt = true
  }
}
