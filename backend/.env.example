# =============================================================================
# SDCoLab Scheduler - Environment Configuration
# 
# Copy to .env and fill in your values.
# Defaults shown; [REQUIRED] items must be set in production.
# =============================================================================

# Core
NODE_ENV=development
PORT=3001
BASE_URL=http://localhost:3001
FRONTEND_URL=http://localhost:5173

# CORS - comma-separated origins (use * for development)
ALLOWED_ORIGINS=*

# JWT [REQUIRED in production - use a long random string]
JWT_SECRET=change-me-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Scheduler API key for automated jobs (reminders, cert warnings)
# [REQUIRED if using automated reminders]
SCHEDULER_API_KEY=change-me-in-production

# AWS
AWS_REGION=us-west-2
USERS_TABLE=colab-scheduler-dev-users
BOOKINGS_TABLE=colab-scheduler-dev-bookings
ACTIVITY_TABLE=colab-scheduler-dev-activity
INVITES_TABLE=colab-scheduler-dev-invites
CERTS_TABLE=colab-scheduler-dev-certifications

# =============================================================================
# Authentication Providers (at least one required)
# =============================================================================

ENABLE_AUTH_EMAIL=true
ENABLE_AUTH_GOOGLE=false
ENABLE_AUTH_MICROSOFT=false
ENABLE_AUTH_GITHUB=false
ENABLE_AUTH_OIDC=false

# Google OAuth (when enabled)
# Create at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=/api/auth/google/callback

# Microsoft OAuth (when enabled)
# Create at: https://portal.azure.com > App registrations
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_TENANT_ID=common
MICROSOFT_CALLBACK_URL=/api/auth/microsoft/callback

# GitHub OAuth (when enabled)
# Create at: https://github.com/settings/developers
GITHUB_OAUTH_CLIENT_ID=
GITHUB_OAUTH_CLIENT_SECRET=
GITHUB_CALLBACK_URL=/api/auth/github/callback

# Generic OIDC (when enabled)
OIDC_ISSUER=
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_CALLBACK_URL=/api/auth/oidc/callback

# =============================================================================
# Integrations
# =============================================================================

ENABLE_GCAL=false
ENABLE_GITHUB=false
ENABLE_SLACK=false
ENABLE_EMAIL=false

# Google Calendar
GCAL_AUTH_METHOD=workload_identity
GCAL_PROJECT_NUMBER=
GCAL_POOL_ID=sdcolab-aws-pool
GCAL_PROVIDER_ID=aws-lambda
GCAL_SERVICE_ACCOUNT_EMAIL=
GCAL_PRIMARY_CALENDAR_ID=primary

# Or use service account key:
# GCAL_AUTH_METHOD=service_account_key
# GOOGLE_PROJECT_ID=
# GOOGLE_CLIENT_EMAIL=
# GOOGLE_PRIVATE_KEY=

# Resource-specific calendars (optional)
GCAL_LASER_LAB_ID=
GCAL_3D_PRINTING_ID=
GCAL_CNC_ID=
GCAL_ELECTRONICS_ID=
GCAL_SEWING_ID=
GCAL_WOODSHOP_ID=

# GitHub Issues, Discussions, Projects (v3.9+)
GITHUB_TOKEN=
GITHUB_ORG=middog
GITHUB_REPO=sdcap-governance

# Enable GitHub Discussions (requires repo to have Discussions enabled)
ENABLE_GITHUB_DISCUSSIONS=false

# GitHub Projects V2 - auto-add issues to a project board (optional)
# Get project ID from: gh project list --owner ORG --format json
# Or from URL: https://github.com/orgs/ORG/projects/N -> need node ID via API
GITHUB_PROJECT_ID=

# Discussion category mapping (optional - uses smart defaults)
# GITHUB_CATEGORY_POLICY=general
# GITHUB_CATEGORY_FEEDBACK=ideas
# GITHUB_CATEGORY_VISION=ideas

# Slack
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#colab-bookings

# Email (AWS SES by default)
SES_FROM_EMAIL=noreply@sdcolab.org
SES_REPLY_TO=info@sdcolab.org

# Alternative: SMTP
# EMAIL_PROVIDER=smtp
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=

# =============================================================================
# Features
# =============================================================================

ENABLE_SELF_REGISTRATION=true
ENABLE_INVITES=true
ENABLE_CERTIFICATIONS=true
ENABLE_ACTIVITY_LOG=true
ENABLE_DARK_MODE=true

# =============================================================================
# Reliability Infrastructure (v4.2.0+)
# =============================================================================

# DynamoDB tables for idempotency and rate limiting
# These provide distributed state for Lambda instances
IDEMPOTENCY_TABLE=colab-scheduler-idempotency
RATE_LIMIT_TABLE=colab-scheduler-ratelimit

# SQS queue for async notifications (Slack, non-critical emails)
# Without this, notifications fall back to fire-and-forget (not recommended)
INTEGRATION_QUEUE_URL=

# Note: Primary rate limiting should be configured at API Gateway level
# The DynamoDB rate limiter is a fallback for defense-in-depth
